@startuml
!include ./include/C4_Context.puml
LAYOUT_LEFT_RIGHT()

' Акторы и внешние системы
Person(user, "Пользователь", "Владелец дома. Управляет отоплением и смотрит температуру через веб-интерфейс.")
System(sensor, "Датчики и исполнительные устройства", "Физические датчики, контроллеры отопления. Связь по интернету/локальному шлюзу.")
SystemDb(db, "PostgreSQL", "Реляционная БД: пользователи, устройства/датчики, значения и состояния.")

' Как есть — один монолит
System_Boundary(monolith_boundary, "Монолитное приложение (Go)") {
  System(monolith, "Smart Home Monolith", "Веб-API + бизнес-логика + доступ к данным. Управление отоплением и мониторинг температуры.")
}

' Взаимодействия
Rel(user, monolith, "HTTP/HTTPS (Web UI / REST)", "Синхронно, запрос-ответ")
Rel(monolith, db, "SQL (pgx)", "Синхронно")
Rel(monolith, sensor, "HTTP/прямые вызовы/опрашивание", "Синхронно")

@enduml